{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "anyOf": [
        {
            "$ref": "#/definitions/MalojaClientConfig"
        },
        {
            "$ref": "#/definitions/LastfmClientConfig"
        }
    ],
    "definitions": {
        "CommonClientData": {
            "properties": {
                "maxRequestRetries": {
                    "default": 1,
                    "description": "default # of http request retries a client can make before error is thrown.",
                    "type": "number"
                },
                "options": {
                    "properties": {
                        "checkExistingScrobbles": {
                            "type": "boolean"
                        },
                        "refreshEnabled": {
                            "type": "boolean"
                        },
                        "verbose": {
                            "properties": {
                                "match": {
                                    "$ref": "#/definitions/MatchLoggingOptions"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "type": "object"
                },
                "retryMultiplier": {
                    "default": 1.5,
                    "description": "default retry delay multiplier (retry attempt * multiplier = # of seconds to wait before retrying).",
                    "type": "number"
                }
            },
            "type": "object"
        },
        "LastfmClientConfig": {
            "properties": {
                "configureAs": {
                    "enum": [
                        "client",
                        "source"
                    ],
                    "type": "string"
                },
                "data": {
                    "allOf": [
                        {
                            "$ref": "#/definitions/CommonClientData"
                        },
                        {
                            "$ref": "#/definitions/LastfmData"
                        }
                    ]
                },
                "name": {
                    "description": "Unique identifier for this client. Used with sources to restrict where scrobbles are sent.",
                    "type": "string"
                }
            },
            "required": [
                "data",
                "name"
            ],
            "type": "object"
        },
        "LastfmData": {
            "properties": {
                "apiKey": {
                    "description": "API Key generated from Last.fm account",
                    "type": "string"
                },
                "redirectUri": {
                    "default": "http://localhost:9078/lastfm/callback",
                    "description": "Optional URI to use for callback. Specify this if callback should be different than the default. MUST have \"lastfm/callback\" in the URL somewhere.",
                    "type": "string"
                },
                "secret": {
                    "description": "Secret generated from Last.fm account",
                    "type": "string"
                },
                "session": {
                    "description": "Optional session id returned from a completed auth flow",
                    "type": "string"
                }
            },
            "required": [
                "apiKey",
                "secret"
            ],
            "type": "object"
        },
        "MalojaClientConfig": {
            "properties": {
                "data": {
                    "allOf": [
                        {
                            "$ref": "#/definitions/CommonClientData"
                        },
                        {
                            "properties": {
                                "apiKey": {
                                    "description": "API Key for Maloja server",
                                    "type": "string"
                                },
                                "url": {
                                    "description": "URL for maloja server",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "apiKey",
                                "url"
                            ],
                            "type": "object"
                        }
                    ]
                },
                "name": {
                    "description": "Unique identifier for this client. Used with sources to restrict where scrobbles are sent.",
                    "type": "string"
                }
            },
            "required": [
                "data",
                "name"
            ],
            "type": "object"
        },
        "MatchLoggingOptions": {
            "properties": {
                "confidenceBreakdown": {
                    "type": "boolean"
                },
                "onMatch": {
                    "type": "boolean"
                },
                "onNoMatch": {
                    "type": "boolean"
                }
            },
            "type": "object"
        }
    }
}

